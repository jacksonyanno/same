<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	beforePhase="#{agendaMBean.beforePhaseModificar}"
	beforePhaseListener="#{agendaMBean.beforePhaseModificar}">

	<h:form style="margin: 0px;">

		<table style="border: none;" cellpadding="0" cellspacing="0"
			align="center">
			<tr>
				<td nowrap="nowrap"><rich:panel header="#{text['agendas.update.title']}"
					bodyClass="formulario" headerClass="formularioCabezal">
					<table style="border: none;" cellpadding="0" cellspacing="0"
						align="center">
						<tr>
							<td nowrap="nowrap"><h:panelGrid columns="2"
								style="padding-top: 0px;" styleClass="Texto"
								columnClasses="formularioEtiqueta, formularioCampo">

								<h:outputText value="#{text['entity.agenda.name']}:"></h:outputText>
								<h:inputText id="nombreAgenda" required="true"
									value="#{agendaMBean.agendaSeleccionada.nombre}" maxlength="32" disabled="true" readonly="true">
									<f:validator validatorId="agendaNombreValidator" />
								</h:inputText>
								<h:outputText value="#{text['entity.agenda.description']}:"></h:outputText>
								<h:inputText
									value="#{agendaMBean.agendaSeleccionada.descripcion}"
									maxlength="50">
								</h:inputText>
								

								<h:outputText value="#{text['entity.agenda.logo']}:"></h:outputText>
								
								<h:panelGrid columns="2">

		                        	<rich:panel id="logo" bodyClass="rich-laguna-panel-no-header" >
		                            	<div style="width: 100px; height: 100px; border-radius: 25px; border: 0px solid #CCCCCC;
		                            	background-color: #eeeeee; background-repeat:no-repeat; background-position:center;
		                            	overflow:hidden; background-image: url('#{agendaMBean.agendaLogo}');"/>
									</rich:panel>	

									<rich:fileUpload fileUploadListener="#{agendaMBean.fileUploadListener}"
	                								 maxFilesQuantity="1"
	                								 id="logoUpload"
	                								 immediateUpload="true"
	                								 acceptedTypes="jpg, gif, png, bmp" 
	                								 allowFlash="false"
	                								 listHeight="50px"
	                								 listWidth="200px">
					                	<a4j:support event="onuploadcomplete" reRender="logo" />
	            					</rich:fileUpload>

								</h:panelGrid>  							
							</h:panelGrid></td>
						</tr>
						<tr>
							<td align="center"><a4j:commandButton value="#{text['button.save']}"
								action="#{agendaMBean.guardar}"
								reRender="pantalla, mostrarAgendaRecurso"></a4j:commandButton> <a4j:commandButton
								value="#{text['button.cancel']}" immediate="true" bypassUpdates="true"
								action="cancelar"></a4j:commandButton></td>
						</tr>
					</table>
				</rich:panel></td>
			</tr>
		</table>
		<h:panelGrid columns="1" width="100%">
			<h:message id="mensajeError" for="nombreAgenda"
				styleClass="mensajeError"></h:message>
		</h:panelGrid>
	</h:form>
</f:view>